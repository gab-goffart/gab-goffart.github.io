(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);for(var n=a(0),i=a.n(n),o=a(3),r=a.n(o),c=a(1),l=function(e){var t=e.state,a=e.dispatch,o=Object(n.useRef)(null),r=Object(n.useState)(null),l=Object(c.a)(r,2),s=l[0],d=l[1],f=Object(n.useState)(null),u=Object(c.a)(f,2),m=u[0],h=u[1];Object(n.useEffect)(function(){return s=o.current.getContext("2d"),d(s),s.lineWidth="2",m=setInterval(v,t.time),h(m),function(){h(function(e){return window.clearInterval(e),null})}},[t.time]),Object(n.useEffect)(function(){s.fillStyle="#000",s.strokeStyle="#fff",s.fillRect(0,0,350,700);for(var e=0;e<t.board.length;e++)for(var a=0;a<t.board[e].length;a++)t.board[e][a]&&(s.fillStyle=t.board[e][a],s.fillRect(35*a,35*e,35,35),s.strokeRect(35*a,35*e,35,35))});var v=function(){a("MOVE_DOWN")};return i.a.createElement("div",{className:"tile is-parent has-text-centered notification is-info"},i.a.createElement("div",{className:"tile is-child"},i.a.createElement("canvas",{ref:o,height:700,width:350})))},s=function(e){var t=e.score;return i.a.createElement("div",{className:"tile is-child notification is-warning"},i.a.createElement("h3",{className:"title is-3"},"Your score : ",i.a.createElement("br",null),t))},d=function(e){for(var t=e.piece,a=e.color,o=null,r=[],c=Object(n.useRef)(null),l=0;l<4;l++){r[l]=[];for(var s=0;s<4;s++)r[l][s]=null}return Object(n.useEffect)(function(){(o=c.current.getContext("2d")).lineWidth="2",o.strokeStyle="#fff",o.fillStyle="#000",o.fillRect(0,0,c.current.width,c.current.height);for(var e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)t[e][n]&&(o.fillStyle=a,o.fillRect(35*n,35*e,35,35),o.strokeRect(35*n,35*e,35,35))},[t]),i.a.createElement("div",{className:"tile is-child notification is-warning"},i.a.createElement("h3",{className:"title is-3"},"Your next piece :"),i.a.createElement("canvas",{ref:c,height:140,width:140}))},f=function(e){var t=e.dispatch;return i.a.createElement("div",{className:"tile is-child notification is-warning"},i.a.createElement("h3",{className:"title is-3"},"Menu"),i.a.createElement("div",{className:"buttons"},i.a.createElement("button",{className:"button is-fullwidth is-inverted is-outlined is-warning",onClick:function(e){t("RESET")}},"Reset"),i.a.createElement("button",{className:"button is-fullwidth is-inverted is-outlined is-warning",onClick:function(e){t("TOGGLE")}},"Play / Pause")))},u=function(e){var t=e.isPlaying;return i.a.createElement("div",{className:"tile is-child notification is-warning"},i.a.createElement("h3",{className:"title is-3"},"Currently ",t?"playing":"paused"))},m=function(e){var t=e.state,a=e.dispatch;return i.a.createElement("div",{className:"tile"},i.a.createElement("div",{className:"tile is-parent"},i.a.createElement(d,{piece:t.nextActive,color:t.nextColor})),i.a.createElement("div",{className:"tile is-parent is-vertical"},i.a.createElement(s,{score:t.score}),i.a.createElement(u,{isPlaying:t.isPlaying}),i.a.createElement(f,{dispatch:a})))},h=function(e){var t=e.isDead,a=(e.isPlaying,e.score),n=e.dispatch,o="modal";t&&(o+=" is-active");return i.a.createElement("div",{className:o},i.a.createElement("div",{className:"modal-background"}),i.a.createElement("div",{className:"modal-card"},i.a.createElement("header",{className:"modal-card-head"},"You are dead!"),i.a.createElement("section",{className:"modal-card-body"},"Looks like you died. Your score is ",a,". Would you like to play another game?"),i.a.createElement("footer",{className:"modal-card-foot"},i.a.createElement("button",{className:"button is-outlined",onClick:function(e){n("RESET")}},"Play again"))))},v=(a(12),a(4)),x=a(5),b=[[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]],[[[0,1,0],[0,1,0],[1,1,0]],[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]]],[[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]],[[0,0,1],[1,1,1],[0,0,0]]],[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]],[[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]],[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]]]],p=["#fc9105","#0fbc1d","#16fcf0","#1622fc","#fc1631","#f702ca","#f2f204"],E=Math.floor(Math.random()*b.length),g=Math.floor(Math.random()*b.length),y=[],k=0;k<20;k++){y[k]=[];for(var w=0;w<10;w++)y[k][w]=null}var N={index:E,activeIndex:0,shape:b[E],active:b[E][0],color:p[E],nextIndex:g,nextShape:b[g],nextActive:b[g][0],nextColor:p[g],position:{x:3,y:0},board:y,score:0,time:1e3,isPlaying:!0,isDead:!1},O=function(e,t){var a=Object(x.a)({},e);switch(a.board=I(a.board,a.active,a.position),t){case"MOVE_LEFT":if(!a.isPlaying)break;a.position.x--,P(a.board,a.active,a.position)&&a.position.x++;break;case"MOVE_RIGHT":if(!a.isPlaying)return a;a.position.x++,P(a.board,a.active,a.position)&&a.position.x--;break;case"MOVE_DOWN":if(!a.isPlaying)break;if(a.position.y++,P(a.board,a.active,a.position)){if(a.position.y--,!R(a.position))return a.isPlaying=!1,a.isDead=!0,a;a.board=M(a.board,a.active,a.position,a.color),a.position.x=3,a.position.y=0,a.score+=50;var n=S(a.board);n.nb>0&&(a.board=n.board,console.log("flushed"),a.time=a.time-2*n.nb,a.score+=400*Math.pow(2,n.nb)),a.index=a.nextIndex,a.activeIndex=0,a.shape=a.nextShape,a.active=a.nextActive,a.color=a.nextColor,a.nextIndex=Math.floor(Math.random()*b.length),a.nextShape=b[a.nextIndex],a.nextActive=b[a.nextIndex][0],a.nextColor=p[a.nextIndex]}break;case"DROP":if(!a.isPlaying)return a;for(;!P(a.board,a.active,a.position);)a.position.y++;if(a.position.y--,!R(a.position))return a.isPlaying=!1,a.isDead=!0,a;a.board=M(a.board,a.active,a.position,a.color),a.position.x=3,a.position.y=0,a.score+=50;var i=S(a.board);i.nb>0&&(a.board=i.board,a.time=a.time-2*i.nb,a.score+=400*Math.pow(2,i.nb)),a.index=a.nextIndex,a.activeIndex=0,a.shape=a.nextShape,a.active=a.nextActive,a.color=a.nextColor,a.nextIndex=Math.floor(Math.random()*b.length),a.nextShape=b[a.nextIndex],a.nextActive=a.nextShape[0],a.nextColor=p[a.nextIndex];break;case"ROTATE":if(!a.isPlaying)break;a.activeIndex++,a.active=a.shape[a.activeIndex%a.shape.length],P(a.board,a.active,a.position)&&(a.activeIndex--,a.active=a.shape[a.activeIndex%a.shape.length]);break;case"TOGGLE":a.isPlaying=!a.isPlaying;break;case"RESET":a.position.x=3,a.position.y=0,a.time=N.time,a.board=C(a.board),a.index=Math.floor(Math.random()*b.length),a.shape=b[a.index],a.active=a.shape[0],a.color=p[a.index],a.nextIndex=Math.floor(Math.random()*b.length),a.nextShape=b[a.nextIndex],a.nextActive=b[a.nextIndex][0],a.nextColor=p[a.nextIndex],a.score=0,a.isPlaying=!0,a.isDead=!1}return a.board=M(a.board,a.active,a.position,a.color),a},I=function(e,t,a){return M(e,t,a,null)},M=function(e,t,a,n){for(var i=0;i<t.length;i++)for(var o=0;o<t[i].length;o++)t[i][o]&&(e[a.y+i][a.x+o]=n);return e},P=function(e,t,a){for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)if(t[n][i]){if(a.y+n>=20)return!0;if(a.x+i<0||a.x+i>=10)return!0;if(e[a.y+n][a.x+i])return!0}return!1},R=function(e){return 0!==e.y},S=function(e){for(var t=!0,a=0,n=0;n<e.length;n++){for(var i=0;i<e[n].length;i++)null===e[n][i]&&(t=!1);t&&(a++,e=j(e,n)),t=!0}return{nb:a,board:e}},j=function(e,t){for(var a=t;a>0;a--)e[a]=Object(v.a)(e[a-1]);for(var n=0;n<e[0].length;n++)e[0][n]=null;return e},C=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e[t].length;a++)e[t][a]=null;return e},T=function(e){var t=Object(n.useReducer)(O,N),a=Object(c.a)(t,2),o=a[0],r=a[1];Object(n.useEffect)(function(){return document.addEventListener("keydown",s),function(){document.removeEventListener("keydown",s)}},[]);var s=function(e){switch(e.keyCode){case 32:r("DROP");break;case 37:r("MOVE_LEFT");break;case 38:r("ROTATE");break;case 39:r("MOVE_RIGHT");break;case 40:r("MOVE_DOWN")}};return i.a.createElement("section",{className:"section"},i.a.createElement("div",{className:"columns"},i.a.createElement("div",{className:"column is-6 is-offset-3"},i.a.createElement("h1",{className:"title is-1"},"Tetris game"),i.a.createElement("div",{className:"tile is-ancestor notification is-info"},i.a.createElement(l,{state:o,dispatch:r}),i.a.createElement(m,{state:o,dispatch:r})))),i.a.createElement(h,{isPlaying:o.isPlaying,isDead:o.isDead,score:o.score,dispatch:r}))};a(13),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},6:function(e,t,a){e.exports=a(14)}},[[6,1,2]]]);
//# sourceMappingURL=main.e3c3bb12.chunk.js.map