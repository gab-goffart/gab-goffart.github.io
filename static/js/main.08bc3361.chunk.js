(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){"use strict";a.r(t);for(var n=a(0),r=a.n(n),o=a(3),i=a.n(o),c=a(1),l=a(4),s="2rem",d=function(e){var t=e.color,a={minHeight:s,minWidth:s,maxHeight:s,maxWidth:s,margin:1,padding:0,backgroundColor:t};return r.a.createElement("div",{className:"notification",style:a})},u=function(e){var t=e.row;return r.a.createElement("div",{className:"columns is-centered",style:{margin:0}},t.map(function(e,t){return r.a.createElement(d,{key:t,color:e})}))},m=function(e){var t=e.board;return r.a.createElement("div",{className:"box has-background-grey-darker"},t.map(function(e,t){return r.a.createElement(u,{key:t,row:e,rowIndex:t})}))},f=function(e){for(var t=e.piece,a=e.color,n=e.vacant,o=[],i=0;i<4;i++){o[i]=[];for(var c=0;c<4;c++)o[i][c]=n}for(var l=0;l<t.length;l++)for(var s=0;s<t[l].length;s++)o[l][s]=t[l][s]?a:n;return r.a.createElement("div",{className:"tile is-child box has-background-primary"},r.a.createElement("h3",{className:"title is-3"},"Next piece : "),o.map(function(e,t){return r.a.createElement(u,{key:t,row:e})}))},v=function(e){var t=e.resetHandler,a=e.toggleHandler,n=e.isPlaying;return r.a.createElement("div",{className:"tile is-child is-vertical box has-background-primary"},r.a.createElement("h3",{className:"title is-3"},"Menu"),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-fullwidth is-rounded is-outlined",onClick:t},"Restart"),r.a.createElement("button",{className:"button is-fullwidth is-rounded is-outlined",onClick:a},n?"Pause":"Start")))},h=function(e){var t=e.score;return r.a.createElement("div",{className:"tile is-child box has-background-primary"},r.a.createElement("h3",{className:"title is-3"},"Votre score : ",r.a.createElement("br",null)," ",t))},b=function(e){var t=e.next,a=e.score,n=e.resetHandler,o=e.toggleHandler,i=e.isPlaying;return r.a.createElement("div",{className:"box has-background-warning"},r.a.createElement("div",{className:"tile is-ancestor is-vertical"},r.a.createElement("div",{className:"tile is-parent is-vertical"},r.a.createElement(f,{piece:t.piece,color:t.color,vacant:t.vacant}),r.a.createElement(h,{score:a}),r.a.createElement(v,{resetHandler:n,toggleHandler:o,isPlaying:i}))))},p=[[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]],[[[0,0,1],[0,0,1],[0,1,1]],[[0,0,0],[1,0,0],[1,1,1]],[[1,1,0],[1,0,0],[1,0,0]],[[1,1,1],[0,0,1],[0,0,0]]],[[[1,0,0],[1,0,0],[1,1,0]],[[1,1,1],[1,0,0],[0,0,0]],[[0,1,1],[0,0,1],[0,0,1]],[[0,0,0],[0,0,1],[1,1,1]]],[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]],[[[1,1,1],[0,1,0],[0,0,0]],[[1,0,0],[1,1,0],[1,0,0]],[[0,0,0],[0,1,0],[1,1,1]],[[0,0,1],[0,1,1],[0,0,1]]]],x=["#fc9105","#0fbc1d","#16fcf0","#1622fc","#fc1631","#f702ca","#f2f204"],g=[],y=0;y<20;y++){g[y]=[];for(var E=0;E<10;E++)g[y][E]="white"}var N=Math.floor(Math.random()*p.length),w=Math.floor(Math.random()*p.length),k={board:g,active:0,index:N,piece:p[N][0],color:x[N],indexNext:w,next:p[w][0],colorNext:x[w],position:{x:Math.floor(5),y:0},isPlaying:!0,score:0},P=function(e){var t=Object(n.useState)(k),a=Object(l.a)(t,2),o=a[0],i=a[1],s=function(){for(var e=[],t=0;t<20;t++){e[t]=[];for(var a=0;a<10;a++)e[t][a]="white"}return e},d=function(e,t,a){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)if(t[n][r]&&!(a.y+n<0)){if(a.y+n>=20)return!0;if(a.x+r<0||a.x+r>10)return!0;if("white"!==e[a.y+n][a.x+r])return!0}return!1},u=function(e){switch(e.keyCode){case 37:v();break;case 38:g();break;case 39:h();break;case 40:f()}};Object(n.useEffect)(function(){document.addEventListener("keydown",u);var e=setInterval(f,700);return function(){clearInterval(e),document.removeEventListener("keydown",u)}},[o.isPlaying]);var f=function(){o.isPlaying&&i(function(e){var t=Object(c.a)({},e);if(t.board=P(e.board,e.piece,e.position),t.position.y++,!d(t.board,t.piece,t.position))return t.board=M(t.board,t.piece,t.position,t.color),t;t.position.y--,function(e,t,a){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++){if(a.y+n===0)return!1;if(t[n][r]&&"white"!==e[a.y+n][a.x+r])return!1}return!0}(t.board,t.piece,t.position)?(t.board=M(t.board,t.piece,t.position,t.color),t.score+=50):(t.board=s(),t.score=0,t.isPlaying=!1);var a=y(t.board);return a>0&&(t.score+=400*Math.pow(2,a)),t.board=E(t.board),t.position.x=Math.floor(5)-1,t.position.y=0,t.active=0,t.index=t.indexNext,t.piece=t.next,t.color=t.colorNext,t.indexNext=Math.floor(Math.random()*p.length),t.next=p[t.indexNext][t.active],t.colorNext=x[t.indexNext],t.board=M(t.board,t.piece,t.position,t.color),t})},v=function(){o.isPlaying&&i(function(e){var t=Object(c.a)({},e);return t.board=P(e.board,e.piece,e.position),t.position.x--,d(t.board,t.piece,t.position)&&t.position.x++,t.board=M(t.board,t.piece,t.position,t.color),t})},h=function(){o.isPlaying&&i(function(e){var t=Object(c.a)({},e);return t.board=P(e.board,e.piece,e.position),t.position.x++,d(t.board,t.piece,t.position)&&t.position.x--,t.board=M(t.board,t.piece,t.position,t.color),t})},g=function(){o.isPlaying&&i(function(e){var t=Object(c.a)({},e);return t.board=P(e.board,e.piece,e.position),t.active++,t.piece=p[e.index][t.active%p[N].length],d(t.board,t.piece,t.position)&&t.active--,t.piece=p[e.index][t.active%p[N].length],t.board=M(t.board,t.piece,t.position,t.color),t})},y=function(e){for(var t=!0,a=0,n=0;n<20;n++){for(var r=0;r<10;r++)"white"===e[n][r]&&(t=!1);t&&a++,t=!0}return a},E=function(e){for(var t=!0,a=0;a<20;a++){for(var n=0;n<10;n++)"white"===e[a][n]&&(t=!1);t&&(e=w(e,a)),t=!0}return e},w=function(e,t){for(var a=t;a>=0;a--)for(var n=0;n<10;n++)e[a][n]="white",0!==a&&(e[a][n]=e[a-1][n]);return e},P=function(e,t,a){return M(e,t,a,"white")},M=function(e,t,a,n){for(var r=0;r<t.length;r++)for(var o=0;o<t[r].length;o++)t[r][o]&&(e[a.y+r][a.x+o]=n);return e};return r.a.createElement("section",{className:"section hero is-fullheight has-background-black"},r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column is-8"},r.a.createElement("h1",{className:"title is-1 has-text-white"},"Tetris!"),r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column is-6"},r.a.createElement(m,{board:o.board})),r.a.createElement("div",{className:"column is-4"},r.a.createElement(b,{next:{piece:o.next,color:o.colorNext,vacant:"white"},score:o.score,resetHandler:function(){i(function(e){var t=Object(c.a)({},e);return t.board=s(),t.score=0,t.active=0,t.index=Math.floor(Math.random()*p.length),t.piece=p[t.index][t.active],t.color=x[t.index],t.indexNext=Math.floor(Math.random()*p.length),t.next=p[t.indexNext][t.active],t.colorNext=x[t.indexNext],t.position={x:3,y:0},t})},toggleHandler:function(){i(function(e){var t=Object(c.a)({},e);return t.isPlaying=!t.isPlaying,t})},isPlaying:o.isPlaying}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(11);i.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},5:function(e,t,a){e.exports=a(12)}},[[5,1,2]]]);
//# sourceMappingURL=main.08bc3361.chunk.js.map